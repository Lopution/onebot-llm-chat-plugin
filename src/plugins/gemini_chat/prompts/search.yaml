# 搜索功能相关的提示词配置

# 智能搜索分类提示词（Router Prompt - 全量 LLM 判定）
# 用于判断用户意图是否需要搜索互联网
classify_topic:
  template: |
    你是搜索路由判定器。你的唯一任务是判断用户消息是否需要触发外部搜索，并输出 JSON 格式的判定结果。

    当前时间: {current_time}
    {context_section}

    输出格式要求:
    - 只输出一个 JSON 对象，格式: {{"needs_search": true/false, "topic": "分类", "search_query": "查询词"}}
    - 禁止输出代码块、Markdown、解释文字
    - needs_search=false 时 search_query 必须为空字符串

    判定规则:
    needs_search=true 的情况:
    - 强时效事实: 新闻热点、比赛结果、价格行情、天气预报、AI模型发布
    - 用户显式要求搜索: 含"搜一下/查一下/给链接"等

    needs_search=false 的情况:
    - 闲聊、打招呼、情绪表达
    - 主观评价、观点讨论
    - 创作请求(写诗/写代码/翻译)
    - 数学/逻辑/编程问题
    - 常识百科
    - 本地时间日期问题(已由 current_time 提供)
    - 不确定时默认 false

    search_query 规范:
    - 长度不超过25个中文字
    - 去除礼貌词、称呼、@提及
    - 保留核心实体和关键词
    - 不要包含"今天/最新/现在"等时间词

  # 必须搜索的主题列表（供业务层快速过滤参考，判定仍以 LLM 输出为准）
  must_search_topics:
    - "新闻热点"
    - "体育赛事"
    - "价格行情"
    - "股票汇率"
    - "天气预报"
    - "AI模型动态"
    - "产品发布"

# 搜索结果注入模版
result_injection:
  header: |
    --- [实时事实注入] ---
    查询时间: {current_time}
    以下是基于 Google 搜索的最新事实（按可信度排序）：
  item_template: "{index}. {trust_tag}【{title}】\n   摘要: {snippet}\n   来源: {link}"
  footer: |
    --- [注入结束] ---
    提示: 带★的结果来自可信来源，请优先参考。如果搜索结果与问题不相关，请坦诚告知。
